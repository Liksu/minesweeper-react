{"version":3,"sources":["utils.ts","debounced-clicks.ts","field/field.tsx","board-state.ts","board/board.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["classes","flatMap","item","String","Array","Object","entries","filter","map","name","join","arand","min","max","Math","ceil","floor","random","ClickValues","DebouncedClicks","resultCb","changePhaseCb","timerId","values","value","duration","phase","logging","resultsValues","contextmenu","Mark","dblclick","Lookup","click","Open","buttonsMapping","0","1","2","3","4","goDown","event","log","push","button","startTimer","length","reduce","a","b","reset","flush","goUp","catchResult","type","stopPropagation","preventDefault","cb","window","setTimeout","saveState","clearTimeout","console","buttons","valueStr","this","onMouseDownCapture","onMouseUpCapture","onContextMenuCapture","onDoubleClickCapture","Field","props","state","content","isSuggested","count","enabled","settings","element","open","isOpen","setState","isMine","toString","mark","isMarked","board","minesCount","resetAnimation","lookup","around","getAround","marked","n","field","Number","suggest","onClick","action","move","Suggest","disable","current","classList","remove","offsetWidth","add","onPress","forEach","component","toggle","React","createRef","cssSettings","y","listeners","className","suggested","style","ref","Component","IFieldSettings","x","assign","BoardState","fields","minesFields","width","height","mines","found","runner","neighbour","includes","starter","Board","timer","won","tick","fillBoard","setInterval","gameOver","checkWin","find","createBoard","win","loose","clickedField","stop","clearInterval","modes","beginner","default","intermediate","expert","fillModes","synonyms","beginer","small","easy","medium","middle","big","herd","App","hash","location","replace","toLowerCase","test","calcSettings","RegExp","$1","innerWidth","innerHeight","maxSize","minSize","fieldSize","fieldsMaxSide","groups","match","customSettings","key","getSettings","isLandscape","screen","orientation","substr","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6a7c92ab.chunk.js","sourcesContent":["export function classes(...classes: Array<string | Array<string> | {[className: string]: boolean}>): string {\r\n    return classes.flatMap(item => {\r\n        if (String(item) === item || item instanceof Array) return item;\r\n        return Object.entries(item).filter(([name, value]) => value).map(([name, flag]) => name)\r\n    }).join(' ')\r\n}\r\n\r\nexport function range(a: number, b?: number) {\r\n    if (a < 0 && b == null) b = -1\r\n    if (b == null) [a, b] = [1, a]\r\n\r\n    const result = []\r\n    for (let i = a; i <= b; i++) result.push(i)\r\n    return result\r\n}\r\n\r\nexport function rand(min: number, max?: number) {\r\n    if (min < 0 && max == null) max = -1\r\n    if (max == null) [min, max] = [1, min]\r\n\r\n    min = Math.ceil(min)\r\n    max = Math.floor(max)\r\n    return Math.floor(Math.random() * (max - min + 1)) + min\r\n}\r\n\r\nexport function arand(min: number, max?: number) {\r\n    if (max == null) [min, max] = [0, min]\r\n\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min)) + min\r\n}\r\n","export enum ClickValues {\r\n    Open = 1,\r\n    Mark = 2,\r\n    Lookup = 3,\r\n    Suggest\r\n}\r\n\r\nexport type ClickResultCb = (action: ClickValues) => void\r\nexport type PressedCb = (state: boolean, action: ClickValues) => void\r\n\r\nexport class DebouncedClicks {\r\n    timerId = 0\r\n    values: Array<number> = []\r\n    value: ClickValues = 0\r\n    duration = 64\r\n    resultCb?: ClickResultCb\r\n    changePhaseCb?: PressedCb\r\n    phase: boolean | null = null // false = touchstart / mousedown, true = touchend / mouseup, null - nothing\r\n\r\n    private logging = false\r\n    private resultsValues: {[type: string]: ClickValues} = {\r\n        contextmenu: ClickValues.Mark,\r\n        dblclick: ClickValues.Lookup,\r\n        click: ClickValues.Open\r\n    }\r\n\r\n    private buttonsMapping: {[buttons: number]: number} = {\r\n        0: 1, // left button\r\n        1: 4, // middle/wheel button\r\n        2: 2, // right button\r\n        3: 8, // back button\r\n        4: 16, // forward button\r\n    }\r\n\r\n    constructor(resultCb?: ClickResultCb, changePhaseCb?: PressedCb) {\r\n        this.resultCb = resultCb\r\n        this.changePhaseCb = changePhaseCb\r\n    }\r\n\r\n    get listeners() {\r\n        return {\r\n            onMouseDownCapture: this.goDown,\r\n            onMouseUpCapture: this.goUp,\r\n            onContextMenuCapture: this.catchResult,\r\n            onDoubleClickCapture: this.catchResult\r\n        }\r\n    }\r\n\r\n    goDown = (event: any): void => {\r\n        this.log('down', event)\r\n        this.phase = false\r\n        this.values.push(this.buttonsMapping[event.button])\r\n\r\n        this.startTimer(() => {\r\n            this.value = this.values[0]\r\n            if (this.values.length > 1) {\r\n                this.value = this.values.reduce((a, b) => a | b)\r\n            }\r\n\r\n            this.log('pre flush')\r\n            this.reset(true)\r\n            this.flush()\r\n        })\r\n    }\r\n\r\n    goUp = (event: any): void => {\r\n        this.log('up', event)\r\n        this.phase = true\r\n        this.startTimer(this.flush)\r\n    }\r\n\r\n    catchResult = (event: any): void => {\r\n        this.log('catch', event)\r\n\r\n        if (!this.value) this.value = this.resultsValues[event.type]\r\n        this.phase = true\r\n        this.flush()\r\n\r\n        this.reset()\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n    }\r\n\r\n    private startTimer = (cb: Function) => {\r\n        if (!this.timerId) {\r\n            this.timerId = window.setTimeout(cb, this.duration)\r\n        }\r\n    }\r\n\r\n    private reset = (saveState = false) => {\r\n        this.values = []\r\n\r\n        if (this.timerId) clearTimeout(this.timerId)\r\n        this.timerId = 0\r\n\r\n        if (!saveState) {\r\n            this.value = 0\r\n            this.phase = null\r\n        }\r\n    }\r\n\r\n    private flush = () => {\r\n        this.log('flush')\r\n        this.changePhaseCb?.(!!this.phase, this.value)\r\n\r\n        if (this.phase) {\r\n            this.resultCb?.(this.value)\r\n            this.reset()\r\n        }\r\n    }\r\n\r\n    private log = (name: string, event?: any) => {\r\n        if (!this.logging) return\r\n        if (event === false) return console.log(name)\r\n\r\n        const {button, buttons, type} = event ?? {}\r\n        const {value, phase} = this\r\n        const valueStr = {1: 'Open', 2: 'Mark', 3: 'Lookup', 4: 'Suggest'}[value]\r\n\r\n        console.log(name,\r\n            {value, valueStr, phase, values: [...this.values]},\r\n            event ? {button, buttons, type, event} : new (class NoEvent {})\r\n        )\r\n    }\r\n}","import React from \"react\";\r\nimport './field.scss'\r\nimport {classes} from \"../utils\";\r\nimport {IFieldSettings} from \"../board-state\";\r\nimport {ClickValues, DebouncedClicks} from \"../debounced-clicks\";\r\n\r\ninterface IFieldProps {\r\n    move?: Function;\r\n    lookup?: Function;\r\n    field: IFieldSettings;\r\n}\r\n\r\nexport class Field extends React.Component<IFieldProps> {\r\n    state = {\r\n        content: '',\r\n        isSuggested: false,\r\n        count: 0\r\n    }\r\n\r\n    enabled = true;\r\n    click: DebouncedClicks\r\n    settings: IFieldSettings\r\n    private readonly element: React.RefObject<HTMLDivElement>;\r\n\r\n    constructor(props: IFieldProps) {\r\n        super(props);\r\n        this.click = new DebouncedClicks(this.onClick, this.onPress)\r\n        this.settings = props.field\r\n        this.settings.component = this\r\n        this.element = React.createRef();\r\n    }\r\n\r\n    render() {\r\n        const cssSettings = {\r\n            '--count': this.state.count,\r\n            '--direction': this.settings.y < 2 ? 1 : -1\r\n        } as React.CSSProperties;\r\n\r\n        return <div\r\n            {...this.click.listeners}\r\n            className={classes(\r\n                'field',\r\n                `around${this.settings.isMine ? 0 : this.settings.value}`,\r\n                {\r\n                    open: this.settings.isOpen as boolean,\r\n                    marked: this.settings.isMarked as boolean,\r\n                    suggested: this.state.isSuggested\r\n                },\r\n            )}\r\n            style={cssSettings}\r\n            ref={this.element}\r\n        >{this.state.content}</div>\r\n    }\r\n\r\n    open = () => {\r\n        this.settings.isOpen = true\r\n        this.setState({\r\n            content: this.settings.isMine ? '💣' : (this.settings.value || '').toString(),\r\n            isSuggested: false,\r\n        })\r\n    }\r\n\r\n    mark = (state?: boolean) => {\r\n        if (this.settings.isOpen) return\r\n        this.settings.isMarked = state ?? !this.settings.isMarked\r\n        const count = this.settings.board?.minesCount ?? 0\r\n\r\n        this.setState({\r\n            count,\r\n            isSuggested: false,\r\n            content: this.settings.isMarked ? '🚩' : ''\r\n        })\r\n        if (state == null) setTimeout(this.resetAnimation, 0)\r\n    }\r\n\r\n    lookup = () => {\r\n        if (!this.settings.isOpen || !this.settings.value) return\r\n\r\n        const around = this.settings.board?.getAround(this.settings)\r\n        const marked = around?.reduce((n: number, field: IFieldSettings) => n + Number(field.isMarked), 0) ?? 0\r\n\r\n        if (this.props.lookup && this.settings.value === marked) {\r\n            this.props.lookup(this.settings)\r\n        }\r\n    }\r\n\r\n    suggest = () => {\r\n        if (this.settings.isOpen || this.settings.isMarked) return\r\n        this.setState({isSuggested: !this.state.isSuggested})\r\n    }\r\n\r\n    onClick = (action: ClickValues) => {\r\n        // console.log('onClick', {1: 'Open', 2: 'Mark', 3: 'Lookup', 4: 'Suggest'}[action])\r\n        // console.log({button})\r\n        if (!this.enabled) return;\r\n\r\n        switch (action) {\r\n            case ClickValues.Open:\r\n                if (!this.settings.isMarked) {\r\n                    if (this.props.move) this.props.move(this.settings)\r\n                    this.open()\r\n                }\r\n                break\r\n            case ClickValues.Mark:\r\n                this.mark()\r\n                break\r\n            case ClickValues.Lookup:\r\n                this.lookup()\r\n                break\r\n            case ClickValues.Suggest:\r\n                this.suggest()\r\n                break\r\n        }\r\n    }\r\n\r\n    disable = () => {\r\n        this.enabled = false;\r\n    }\r\n\r\n    private resetAnimation = () => {\r\n        this.element.current?.classList.remove('animate')\r\n        void this.element.current?.offsetWidth\r\n        this.element.current?.classList.add('animate')\r\n    }\r\n\r\n    private onPress = (state: boolean, action: ClickValues) => {\r\n        if (action !== ClickValues.Lookup) return\r\n        // console.log('onPress', {state, action}, state ? 'release' : 'press', {1: 'Open', 2: 'Mark', 3: 'Lookup', 4: 'Suggest'}[action])\r\n\r\n        this.settings.board\r\n            ?.getAround(this.settings)\r\n            .filter(field => !field.isOpen && !field.isMarked)\r\n            .forEach(field => {\r\n                field.component?.element.current?.classList.toggle('pressed', !state)\r\n            })\r\n    }\r\n}","import {arand} from \"./utils\";\r\nimport {Field} from \"./field/field\";\r\n\r\nexport interface IBoardSettings {\r\n    width: number;\r\n    height: number;\r\n    mines: number;\r\n}\r\n\r\nexport class IFieldSettings {\r\n    value: number = 0 // 0 - empty, 1..8 - mines are near\r\n    x: number = 0\r\n    y: number = 0\r\n    isOpen?: boolean = false\r\n    isMine?: boolean = false\r\n    isMarked?: boolean = false\r\n\r\n    component?: Field\r\n    board?: BoardState\r\n\r\n    constructor(values: IFieldSettings) {\r\n        Object.assign(this, values);\r\n    }\r\n}\r\n\r\nexport class BoardState extends Array {\r\n    fields: Array<IFieldSettings> = []\r\n    board: Array<Array<IFieldSettings>> = []\r\n    minesFields: Array<IFieldSettings> = []\r\n\r\n    width = 8\r\n    height = 8\r\n    mines = 8\r\n\r\n\r\n    createBoard(settings: IBoardSettings, empty = false) {\r\n        Object.assign(this, settings);\r\n\r\n        // reset properties\r\n        this.fields = [];\r\n        this.minesFields = [];\r\n        this.board = [];\r\n        for (let x = 0; x < this.width; x++) {\r\n            this.board[x] = []\r\n        }\r\n\r\n        // create fields\r\n        for (let y = 0; y < this.height; y++) {\r\n            for (let x = 0; x < this.width; x++) {\r\n                this.board[x][y] = new IFieldSettings({x, y, value: 0, board: this})\r\n                this.fields.push(this.board[x][y])\r\n            }\r\n        }\r\n    }\r\n\r\n    fillBoard(starter: IFieldSettings) {\r\n        // set mines\r\n        let n = this.mines;\r\n        while (n) {\r\n            const x = arand(this.width)\r\n            const y = arand(this.height)\r\n\r\n            if (!this.board[x][y].isMine && x !== starter.x && y !== starter.y) {\r\n                this.minesFields.push(this.board[x][y])\r\n                this.board[x][y].isMine = true;\r\n                n--;\r\n            }\r\n        }\r\n\r\n        // set values\r\n        this.minesFields.forEach(field => {\r\n            this.getAround(field).forEach(field => field.value++)\r\n        })\r\n    }\r\n\r\n    getAround = (field: IFieldSettings): Array<IFieldSettings> => {\r\n        const {x, y} = field;\r\n        return [\r\n            [x - 1, y - 1], [x, y - 1], [x + 1, y - 1],\r\n            [x - 1, y], /*  ;)  */  [x + 1, y],\r\n            [x - 1, y + 1], [x, y + 1], [x + 1, y + 1],\r\n        ].filter(([x, y]) => x >= 0 && x < this.width && y >= 0 && y < this.height)\r\n            .map(([x, y]) => this.board[x][y])\r\n    }\r\n\r\n    lookup = (field: IFieldSettings) => {\r\n        const found: Array<IFieldSettings> = []\r\n        const runner = (field: IFieldSettings) => {\r\n            const around = this.getAround(field).filter(neighbour => !found.includes(neighbour) && !neighbour.isMarked);\r\n            found.push(...around)\r\n            around.filter(neighbour => !neighbour.value).forEach(runner)\r\n        }\r\n\r\n        runner(field)\r\n        return found\r\n    }\r\n\r\n    get minesCount() {\r\n        return this.mines - this.fields.filter(field => field.isMarked).length\r\n    }\r\n}","import React from \"react\";\r\nimport './board.scss'\r\nimport {Field} from \"../field/field\";\r\nimport {BoardState, IBoardSettings, IFieldSettings} from \"../board-state\";\r\nimport {classes} from \"../utils\";\r\n\r\ninterface IBoardProps extends IBoardSettings {\r\n}\r\n\r\nexport class Board extends React.Component<IBoardProps> {\r\n    board = new BoardState()\r\n    timer = 0\r\n    timerId = 0\r\n\r\n    state = {\r\n        won: null\r\n    }\r\n\r\n    constructor(props: IBoardProps) {\r\n        super(props);\r\n        this.board.createBoard(this.props);\r\n        // @ts-ignore\r\n        window.board = this.board\r\n    }\r\n\r\n    render() {\r\n        // console.log('Board.render', this.board)\r\n        const settings = {\r\n            '--columns': this.props.width,\r\n            '--rows': this.props.height,\r\n            '--count': this.board.minesCount\r\n        } as React.CSSProperties;\r\n\r\n        return <div className={classes('board', {win: this.state.won === true, loose: this.state.won === false})} style={settings}>\r\n            {this.board.fields.map(field => (\r\n                <Field field={field} key={`${field.x}.${field.y}`} move={this.move} lookup={this.lookup}/>\r\n            ))}\r\n        </div>;\r\n    }\r\n\r\n    tick = () => {\r\n        this.timer++\r\n        // console.log('Seconds', this.timer)\r\n    }\r\n\r\n    checkWin(clickedField?: IFieldSettings) {\r\n        const closedFound = this.board.fields.find(field => !field.isMine && (!field.isOpen && clickedField !== field))\r\n        if (!closedFound) {\r\n            console.log('Win!', this.timer, 'seconds')\r\n            this.stop()\r\n            this.setState({won: true})\r\n            this.board.minesFields.forEach(field => field.component?.mark(true))\r\n            return true\r\n        }\r\n    }\r\n\r\n    move = (field: IFieldSettings) => {\r\n        if (!this.timer) {\r\n            this.board.fillBoard(field)\r\n            this.timer = 1\r\n            this.timerId = window.setInterval(this.tick, 1000)\r\n        }\r\n\r\n        if (field.isMine) return this.gameOver()\r\n\r\n        if (!this.checkWin(field)) {\r\n            if (!field.value) this.lookup(field)\r\n        }\r\n    }\r\n\r\n    lookup = (field: IFieldSettings) => {\r\n        if (field.isMarked) return;\r\n\r\n        const found = this.board.lookup(field)\r\n        found.forEach(field => !field.isOpen && field.component?.open())\r\n\r\n        const hasMine = found.find((field: IFieldSettings) => field.isMine)\r\n        if (hasMine) this.gameOver()\r\n        else this.checkWin()\r\n\r\n        return found\r\n    }\r\n\r\n    private stop() {\r\n        clearInterval(this.timerId)\r\n        this.board.fields.forEach(field => field.component?.disable())\r\n    }\r\n\r\n    private gameOver() {\r\n        this.setState({won: false})\r\n        console.log('game over')\r\n        this.board.minesFields.forEach(field => field.component?.open())\r\n        this.stop()\r\n    }\r\n}\r\n","import React from 'react';\nimport './App.css';\n\nimport {Board} from \"./board/board\";\nimport {IBoardSettings} from \"./board-state\";\n\nconst modes: {[mode: string]: IBoardSettings} = {\n    beginner: {width: 9, height: 9, mines: 10},\n    default: {width: 12, height: 8, mines: 12},\n    intermediate: {width: 16, height: 16, mines: 40},\n    expert: {width: 30, height: 16, mines: 99},\n}\n\nconst fillModes: {[mode: string]: {min: number, mines: number}} = {\n    beginner: {min: 10, mines: 0.12},\n    default: {min: 12, mines: 0.125},\n    intermediate: {min: 16, mines: 0.15},\n    expert: {min: 20, mines: 0.2}\n}\n\nconst synonyms: {[key: string]: string} = {\n    beginer: 'beginner',\n    small: 'beginner',\n    easy: 'beginner',\n    min: 'beginner',\n    medium: 'intermediate',\n    middle: 'intermediate',\n    big: 'expert',\n    max: 'expert',\n    herd: 'expert'\n}\n\nfunction getSettings(): IBoardSettings {\n    let hash = window.location.hash.replace('#', '').toLowerCase()\n\n    if (!hash) return modes.default\n    if (hash in synonyms) hash = synonyms[hash]\n    if (hash in modes) return modes[hash]\n\n    if (/^fill:?(\\w+)?$/.test(hash)) {\n        const calcSettings = fillModes[RegExp.$1] || fillModes[synonyms[RegExp.$1]] || fillModes.default\n        const {innerWidth, innerHeight} = window\n        const maxSize = Math.max(innerWidth, innerHeight)\n        const minSize = Math.min(innerWidth, innerHeight)\n\n        const fieldSize = Math.floor(minSize / calcSettings.min)\n        const fieldsMaxSide = Math.floor(maxSize / fieldSize)\n\n        const mines = Math.floor(calcSettings.min * fieldsMaxSide * calcSettings.mines)\n\n        return innerWidth > innerHeight\n            ? {\n                mines,\n                width: fieldsMaxSide,\n                height: calcSettings.min\n            }\n            : {\n                mines,\n                width: calcSettings.min,\n                height: fieldsMaxSide\n            }\n    }\n\n    if (/^custom:/.test(hash)) {\n        const groups = hash.match(/^custom:(?<width>\\d+)\\D(?<height>\\d+)\\D(?<mines>\\d+)/)?.groups as {[key: string]: string}\n        let customSettings = {} as IBoardSettings\n        for (let key in groups) customSettings[key as keyof IBoardSettings] = +groups[key]\n        return customSettings\n    }\n\n\n    return modes.default\n}\n\nfunction App() {\n    let settings = getSettings()\n\n    // fix for mobile landscape\n    const isLandscape = window.screen.orientation.type.substr(0, 4) === 'land'\n    const isMobile = window.innerWidth < 800\n    // @ts-ignore\n    if (isMobile && isLandscape && settings.width < settings.height) {\n        [settings.width, settings.height] = [settings.height, settings.width]\n    }\n\n    return (\n        <div className=\"App\">\n            <Board width={settings.width} height={settings.height} mines={settings.mines}/>\n        </div>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}